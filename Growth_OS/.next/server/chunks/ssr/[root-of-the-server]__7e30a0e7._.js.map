{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["file:///Users/liyao/Code/workwork/frontend/Growth_OS/src/lib/products.ts"],"sourcesContent":["import { supabase } from './supabase'\nimport { Project, Tag, ProductImage, ProductZone } from '@/types'\n\nexport interface ProductsFilter {\n  category?: string\n  zone?: ProductZone\n  sortBy?: 'created_at' | 'price' | 'views' | 'likes' | 'rating'\n  sortOrder?: 'asc' | 'desc'\n  limit?: number\n  offset?: number\n}\n\nexport class ProductsService {\n  // 获取所有产品\n  static async getProducts(filter: ProductsFilter = {}): Promise<Project[]> {\n    if (!supabase) {\n      console.warn('Supabase not configured, returning empty array')\n      return []\n    }\n\n    try {\n      let query = supabase\n        .from('products')\n        .select('*')\n        .eq('status', 'active')\n\n      // 应用过滤器\n      if (filter.category) {\n        query = query.eq('category', filter.category)\n      }\n      \n      if (filter.zone && filter.zone !== 'all') {\n        query = query.eq('zone', filter.zone)\n      }\n\n      // 应用排序\n      if (filter.sortBy) {\n        query = query.order(filter.sortBy, { \n          ascending: filter.sortOrder === 'asc' \n        })\n      } else {\n        // 默认按创建时间倒序\n        query = query.order('created_at', { ascending: false })\n      }\n\n      // 应用分页\n      if (filter.limit) {\n        query = query.limit(filter.limit)\n      }\n      if (filter.offset) {\n        query = query.range(filter.offset, filter.offset + (filter.limit || 10) - 1)\n      }\n\n      const { data, error } = await query\n\n      if (error) {\n        console.error('Error fetching products:', error)\n        return []\n      }\n\n      return data?.map(item => ProductsService.transformProduct(item)) || []\n    } catch (error) {\n      console.error('Error in getProducts:', error)\n      return []\n    }\n  }\n\n  // 获取用户产品（包括所有状态）\n  static async getUserProducts(userId: string, includeDeleted = false): Promise<Project[]> {\n    if (!supabase) {\n      console.warn('Supabase not configured, returning empty array')\n      return []\n    }\n\n    try {\n      let query = supabase\n        .from('products')\n        .select('*')\n        .eq('author_id', userId)\n\n      if (!includeDeleted) {\n        query = query.neq('status', 'deleted')\n      }\n\n      query = query.order('created_at', { ascending: false })\n\n      const { data, error } = await query\n\n      if (error) {\n        console.error('Error fetching user products:', error)\n        return []\n      }\n\n      return data?.map(item => ProductsService.transformProduct(item)) || []\n    } catch (error) {\n      console.error('Error in getUserProducts:', error)\n      return []\n    }\n  }\n\n  // 根据ID获取单个产品\n  static async getProductById(id: string): Promise<Project | null> {\n    if (!supabase) {\n      console.warn('Supabase not configured')\n      return null\n    }\n\n    try {\n      const { data, error } = await supabase\n        .from('products')\n        .select('*')\n        .eq('id', id)\n        .eq('status', 'active')\n        .single()\n\n      if (error) {\n        console.error('Error fetching product:', error)\n        return null\n      }\n\n      return data ? ProductsService.transformProduct(data) : null\n    } catch (error) {\n      console.error('Error in getProductById:', error)\n      return null\n    }\n  }\n\n  // 增加产品浏览次数\n  static async incrementViews(productId: string): Promise<void> {\n    if (!supabase) return\n\n    try {\n      await supabase.rpc('increment_product_views', {\n        product_id: productId\n      })\n    } catch (error) {\n      console.error('Error incrementing views:', error)\n    }\n  }\n\n  // 切换产品点赞状态\n  static async toggleLike(productId: string, isLiked: boolean): Promise<void> {\n    if (!supabase) return\n\n    try {\n      await supabase.rpc('toggle_product_like', {\n        product_id: productId,\n        increment: !isLiked // 如果当前已点赞，则取消（减少）；否则增加\n      })\n    } catch (error) {\n      console.error('Error toggling like:', error)\n    }\n  }\n\n  // 获取产品类别列表\n  static async getCategories(): Promise<string[]> {\n    if (!supabase) return []\n\n    try {\n      const { data, error } = await supabase\n        .from('products')\n        .select('category')\n        .eq('status', 'active')\n\n      if (error) {\n        console.error('Error fetching categories:', error)\n        return []\n      }\n\n      // 去重并排序\n      const categories = [...new Set(data.map(item => item.category))]\n      return categories.filter(Boolean).sort()\n    } catch (error) {\n      console.error('Error in getCategories:', error)\n      return []\n    }\n  }\n\n  // 搜索产品\n  static async searchProducts(query: string, filter: ProductsFilter = {}): Promise<Project[]> {\n    if (!supabase || !query.trim()) {\n      return this.getProducts(filter)\n    }\n\n    try {\n      let dbQuery = supabase\n        .from('products')\n        .select('*')\n        .eq('status', 'active')\n        .or(`name.ilike.%${query}%,description.ilike.%${query}%,author_name.ilike.%${query}%`)\n\n      // 应用过滤器\n      if (filter.category) {\n        dbQuery = dbQuery.eq('category', filter.category)\n      }\n      \n      if (filter.zone && filter.zone !== 'all') {\n        dbQuery = dbQuery.eq('zone', filter.zone)\n      }\n\n      // 应用排序\n      if (filter.sortBy) {\n        dbQuery = dbQuery.order(filter.sortBy, { \n          ascending: filter.sortOrder === 'asc' \n        })\n      } else {\n        dbQuery = dbQuery.order('created_at', { ascending: false })\n      }\n\n      // 应用分页\n      if (filter.limit) {\n        dbQuery = dbQuery.limit(filter.limit)\n      }\n\n      const { data, error } = await dbQuery\n\n      if (error) {\n        console.error('Error searching products:', error)\n        return []\n      }\n\n      return data?.map(item => ProductsService.transformProduct(item)) || []\n    } catch (error) {\n      console.error('Error in searchProducts:', error)\n      return []\n    }\n  }\n\n  // 转换数据库数据为前端使用的格式\n  static transformProduct(dbProduct: Record<string, unknown>): Project {\n    const images = ProductsService.parseImages(dbProduct.images)\n    const firstImage = images.length > 0 ? images[0].url : undefined\n    \n    return {\n      id: dbProduct.id as string,\n      name: dbProduct.name as string,\n      author: dbProduct.author_name as string,\n      author_id: dbProduct.author_id as string,\n      author_name: dbProduct.author_name as string,\n      description: dbProduct.description as string,\n      price: parseFloat(dbProduct.price as string),\n      currency: dbProduct.currency as string,\n      category: dbProduct.category as string,\n      zone: dbProduct.zone as ProductZone,\n      image: firstImage, // 向后兼容，使用第一张图片\n      image_url: firstImage, // 向后兼容，使用第一张图片\n      images: images, // 新的多图字段\n      tags: ProductsService.parseTags(dbProduct.tags),\n      views: (dbProduct.views as number) || 0,\n      likes: (dbProduct.likes as number) || 0,\n      rating: parseFloat((dbProduct.rating as string) || '0') || 0,\n      verified: true, // 可以基于作者验证状态设置\n      status: dbProduct.status as 'active' | 'inactive' | 'deleted',\n      created_at: dbProduct.created_at as string,\n      updated_at: dbProduct.updated_at as string,\n      // 订阅相关字段\n      product_type: dbProduct.product_type as 'product' | 'subscription',\n      pricing_model: dbProduct.pricing_model as 'one_time' | 'subscription',\n      subscription_period: dbProduct.subscription_period as 'daily' | 'weekly' | 'monthly' | 'yearly',\n      subscription_price_per_period: dbProduct.subscription_price_per_period ? parseFloat(dbProduct.subscription_price_per_period as string) : undefined,\n      subscription_duration: dbProduct.subscription_duration as number,\n      subscription_prices: ProductsService.parseSubscriptionPrices(dbProduct.subscription_prices)\n    }\n  }\n\n  // 解析标签JSON数据\n  static parseTags(tagsJson: unknown): Tag[] {\n    if (!tagsJson) return []\n    \n    try {\n      if (typeof tagsJson === 'string') {\n        return JSON.parse(tagsJson)\n      }\n      return Array.isArray(tagsJson) ? tagsJson : []\n    } catch (error) {\n      console.error('Error parsing tags:', error)\n      return []\n    }\n  }\n\n  // 解析图片JSON数据\n  static parseImages(imagesJson: unknown): ProductImage[] {\n    if (!imagesJson) return []\n    \n    try {\n      if (typeof imagesJson === 'string') {\n        return JSON.parse(imagesJson)\n      }\n      return Array.isArray(imagesJson) ? imagesJson : []\n    } catch (error) {\n      console.error('Error parsing images:', error)\n      return []\n    }\n  }\n\n  // 解析订阅价格JSON数据\n  static parseSubscriptionPrices(pricesJson: unknown): { daily?: number; weekly?: number; monthly?: number; yearly?: number } | undefined {\n    if (!pricesJson) return undefined\n    \n    try {\n      if (typeof pricesJson === 'string') {\n        return JSON.parse(pricesJson)\n      }\n      return typeof pricesJson === 'object' ? pricesJson as { daily?: number; weekly?: number; monthly?: number; yearly?: number } : undefined\n    } catch (error) {\n      console.error('Error parsing subscription prices:', error)\n      return undefined\n    }\n  }\n\n  // 更新产品\n  static async updateProduct(productId: string, updates: Partial<{\n    name: string\n    description: string\n    price: number\n    currency: string\n    category: string\n    status: 'active' | 'inactive'\n    images: Array<{ url: string; alt: string }>\n    pricing_model: 'one_time' | 'subscription'\n    subscription_period: 'daily' | 'weekly' | 'monthly' | 'yearly'\n    subscription_prices: { daily?: number; weekly?: number; monthly?: number; yearly?: number }\n    subscription_price_per_period: number | null\n    subscription_duration: number | null\n    product_type: 'product' | 'subscription'\n  }>): Promise<Project> {\n    if (!supabase) {\n      throw new Error('Supabase not configured')\n    }\n\n    try {\n      const updateData: Record<string, unknown> = { ...updates }\n      \n      // Convert images array to JSON if provided\n      if (updates.images) {\n        updateData.images = JSON.stringify(updates.images)\n      }\n      \n      // Convert subscription_prices to JSON if provided\n      if (updates.subscription_prices) {\n        updateData.subscription_prices = JSON.stringify(updates.subscription_prices)\n      }\n\n      const { data, error } = await supabase\n        .from('products')\n        .update(updateData)\n        .eq('id', productId)\n        .select()\n        .single()\n\n      if (error) {\n        console.error('Error updating product:', error)\n        throw new Error(`Failed to update product: ${error.message}`)\n      }\n\n      return ProductsService.transformProduct(data)\n    } catch (error) {\n      console.error('Error in updateProduct:', error)\n      throw error\n    }\n  }\n\n  // 删除产品（软删除）\n  static async deleteProduct(productId: string): Promise<void> {\n    if (!supabase) {\n      throw new Error('Supabase not configured')\n    }\n\n    try {\n      const { error } = await supabase\n        .from('products')\n        .update({ status: 'deleted' })\n        .eq('id', productId)\n\n      if (error) {\n        console.error('Error deleting product:', error)\n        throw new Error(`Failed to delete product: ${error.message}`)\n      }\n    } catch (error) {\n      console.error('Error in deleteProduct:', error)\n      throw error\n    }\n  }\n\n  // 永久删除产品\n  static async permanentDeleteProduct(productId: string): Promise<void> {\n    if (!supabase) {\n      throw new Error('Supabase not configured')\n    }\n\n    try {\n      const { error } = await supabase\n        .from('products')\n        .delete()\n        .eq('id', productId)\n\n      if (error) {\n        console.error('Error permanently deleting product:', error)\n        throw new Error(`Failed to permanently delete product: ${error.message}`)\n      }\n    } catch (error) {\n      console.error('Error in permanentDeleteProduct:', error)\n      throw error\n    }\n  }\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 320, "column": 0}, "map": {"version":3,"sources":["file:///Users/liyao/Code/workwork/frontend/Growth_OS/src/components/create/SubscriptionPricing.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport { Check, X } from 'lucide-react'\n\ninterface SubscriptionPrices {\n  daily?: number\n  weekly?: number\n  monthly?: number\n  yearly?: number\n}\n\ninterface SubscriptionPricingProps {\n  currency: string\n  pricingModel: 'one_time' | 'subscription'\n  oneTimePrice: number\n  subscriptionPeriod?: 'daily' | 'weekly' | 'monthly' | 'yearly'\n  subscriptionPrices?: SubscriptionPrices\n  subscriptionDuration?: number\n  onChange: (data: {\n    pricing_model: 'one_time' | 'subscription'\n    price: number\n    subscription_period?: 'daily' | 'weekly' | 'monthly' | 'yearly'\n    subscription_prices?: SubscriptionPrices\n    subscription_duration?: number\n  }) => void\n}\n\nexport function SubscriptionPricing({\n  currency,\n  pricingModel,\n  oneTimePrice,\n  subscriptionPeriod,\n  subscriptionPrices = {},\n  subscriptionDuration = 1,\n  onChange\n}: SubscriptionPricingProps) {\n  const [isEditing, setIsEditing] = useState(false)\n  const [tempPricingModel, setTempPricingModel] = useState<'one_time' | 'subscription'>(pricingModel)\n  const [tempOneTimePrice, setTempOneTimePrice] = useState(oneTimePrice)\n  const [tempSubscriptionPeriod, setTempSubscriptionPeriod] = useState<'daily' | 'weekly' | 'monthly' | 'yearly'>(subscriptionPeriod || 'monthly')\n  const [tempSubscriptionPrices, setTempSubscriptionPrices] = useState<SubscriptionPrices>({\n    daily: subscriptionPrices.daily || 0.99,\n    weekly: subscriptionPrices.weekly || 4.99,\n    monthly: subscriptionPrices.monthly || 19.99,\n    yearly: subscriptionPrices.yearly || 199.99,\n    ...subscriptionPrices\n  })\n  const [tempSubscriptionDuration, setTempSubscriptionDuration] = useState<number>(subscriptionDuration)\n\n  const periodLabels = {\n    daily: 'Daily',\n    weekly: 'Weekly', \n    monthly: 'Monthly',\n    yearly: 'Yearly'\n  }\n\n  const handleSave = () => {\n    if (tempPricingModel === 'one_time') {\n      onChange({\n        pricing_model: 'one_time',\n        price: tempOneTimePrice\n      })\n    } else {\n      onChange({\n        pricing_model: 'subscription',\n        price: tempSubscriptionPrices[tempSubscriptionPeriod] || 0,\n        subscription_period: tempSubscriptionPeriod,\n        subscription_prices: tempSubscriptionPrices,\n        subscription_duration: tempSubscriptionDuration\n      })\n    }\n    setIsEditing(false)\n  }\n\n  const handleCancel = () => {\n    setTempPricingModel(pricingModel)\n    setTempOneTimePrice(oneTimePrice)\n    setTempSubscriptionPeriod(subscriptionPeriod || 'monthly')\n    setTempSubscriptionPrices({\n      daily: subscriptionPrices.daily || 0.99,\n      weekly: subscriptionPrices.weekly || 4.99,\n      monthly: subscriptionPrices.monthly || 19.99,\n      yearly: subscriptionPrices.yearly || 199.99,\n      ...subscriptionPrices\n    })\n    setTempSubscriptionDuration(subscriptionDuration)\n    setIsEditing(false)\n  }\n\n  if (!isEditing) {\n    return (\n      <div className=\"bg-gray-50 rounded-lg p-4\">\n        <div className=\"flex items-center justify-between mb-2\">\n          <h4 className=\"font-semibold\">Pricing Model</h4>\n          <button\n            onClick={() => setIsEditing(true)}\n            className=\"text-primary hover:text-blue-600 text-sm font-medium\"\n          >\n            Edit\n          </button>\n        </div>\n        \n        <div className=\"space-y-2\">\n          <div className=\"flex items-center space-x-2\">\n            <span className=\"text-sm text-gray-600\">Mode:</span>\n            <span className={`px-2 py-1 rounded text-xs font-medium ${\n              pricingModel === 'one_time' \n                ? 'bg-blue-100 text-blue-800' \n                : 'bg-purple-100 text-purple-800'\n            }`}>\n              {pricingModel === 'one_time' ? 'One-time' : 'Subscription'}\n            </span>\n          </div>\n          \n          {pricingModel === 'one_time' ? (\n            <p className=\"text-gray-800 font-bold\">{currency} {oneTimePrice}</p>\n          ) : (\n            <div className=\"space-y-1\">\n              <p className=\"text-gray-800 font-bold\">\n                {currency} {subscriptionPrices?.[subscriptionPeriod || 'monthly'] || 0} / {periodLabels[subscriptionPeriod || 'monthly']}\n              </p>\n              <div className=\"text-xs text-gray-500\">\n                <div>Daily: {currency} {subscriptionPrices?.daily || 0.99}</div>\n                <div>Weekly: {currency} {subscriptionPrices?.weekly || 4.99}</div>\n                <div>Monthly: {currency} {subscriptionPrices?.monthly || 19.99}</div>\n                <div>Yearly: {currency} {subscriptionPrices?.yearly || 199.99}</div>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"bg-gray-50 rounded-lg p-4\">\n      <div className=\"flex items-center justify-between mb-4\">\n        <h4 className=\"font-semibold\">Pricing Model</h4>\n        <div className=\"flex space-x-2\">\n          <button\n            onClick={handleSave}\n            className=\"px-3 py-1 bg-primary text-white rounded text-sm hover:bg-blue-600 flex items-center space-x-1\"\n          >\n            <Check className=\"w-3 h-3\" />\n            <span>Save</span>\n          </button>\n          <button\n            onClick={handleCancel}\n            className=\"px-3 py-1 border border-gray-300 text-gray-700 rounded text-sm hover:bg-gray-50 flex items-center space-x-1\"\n          >\n            <X className=\"w-3 h-3\" />\n            <span>Cancel</span>\n          </button>\n        </div>\n      </div>\n\n      {/* 定价模式选择 */}\n      <div className=\"space-y-4\">\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 mb-2\">Pricing Model</label>\n          <div className=\"grid grid-cols-2 gap-3\">\n            <button\n              type=\"button\"\n              onClick={() => setTempPricingModel('one_time')}\n              className={`p-3 border rounded-lg text-sm ${\n                tempPricingModel === 'one_time' \n                  ? 'border-primary bg-blue-50 text-primary' \n                  : 'border-gray-200 hover:border-gray-300'\n              }`}\n            >\n              <div className=\"font-medium\">One-time Purchase</div>\n              <div className=\"text-xs text-gray-500\">Users pay once for permanent access</div>\n            </button>\n            \n            <button\n              type=\"button\"\n              onClick={() => setTempPricingModel('subscription')}\n              className={`p-3 border rounded-lg text-sm ${\n                tempPricingModel === 'subscription' \n                  ? 'border-primary bg-blue-50 text-primary' \n                  : 'border-gray-200 hover:border-gray-300'\n              }`}\n            >\n              <div className=\"font-medium\">Subscription</div>\n              <div className=\"text-xs text-gray-500\">Users pay periodically for access</div>\n            </button>\n          </div>\n        </div>\n\n        {tempPricingModel === 'one_time' ? (\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">Price</label>\n            <div className=\"flex items-center space-x-2\">\n              <span className=\"text-gray-600\">{currency}</span>\n              <input\n                type=\"number\"\n                step=\"0.01\"\n                min=\"0\"\n                value={tempOneTimePrice}\n                onChange={(e) => setTempOneTimePrice(Number(e.target.value))}\n                className=\"flex-1 px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary focus:border-transparent\"\n              />\n            </div>\n          </div>\n        ) : (\n          <div className=\"space-y-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">Primary Subscription Period</label>\n              <select\n                value={tempSubscriptionPeriod}\n                onChange={(e) => setTempSubscriptionPeriod(e.target.value as 'daily' | 'weekly' | 'monthly' | 'yearly')}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary focus:border-transparent\"\n              >\n                <option value=\"daily\">Daily Subscription</option>\n                <option value=\"weekly\">Weekly Subscription</option>\n                <option value=\"monthly\">Monthly Subscription</option>\n                <option value=\"yearly\">Yearly Subscription</option>\n              </select>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">Subscription Duration</label>\n              <div className=\"flex items-center space-x-2\">\n                <input\n                  type=\"number\"\n                  min=\"1\"\n                  max=\"100\"\n                  value={tempSubscriptionDuration}\n                  onChange={(e) => setTempSubscriptionDuration(Number(e.target.value))}\n                  className=\"px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary focus:border-transparent w-24\"\n                />\n                <span className=\"text-sm text-gray-600\">\n                  {tempSubscriptionPeriod}(s)\n                </span>\n              </div>\n              <p className=\"text-xs text-gray-500 mt-1\">How many periods the subscription will last</p>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">Pricing for Each Period</label>\n              <div className=\"grid grid-cols-2 gap-3\">\n                {Object.entries(periodLabels).map(([period, label]) => (\n                  <div key={period}>\n                    <label className=\"block text-xs text-gray-600 mb-1\">{label}</label>\n                    <div className=\"flex items-center space-x-1\">\n                      <span className=\"text-sm text-gray-600\">{currency}</span>\n                      <input\n                        type=\"number\"\n                        step=\"0.01\"\n                        min=\"0\"\n                        value={tempSubscriptionPrices[period as keyof SubscriptionPrices] || 0}\n                        onChange={(e) => setTempSubscriptionPrices({\n                          ...tempSubscriptionPrices,\n                          [period]: Number(e.target.value)\n                        })}\n                        className=\"flex-1 px-2 py-1 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-primary focus:border-transparent\"\n                      />\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 958, "column": 0}, "map": {"version":3,"sources":["file:///Users/liyao/Code/workwork/frontend/Growth_OS/src/components/create/MultiImageEditor.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport { Plus, X, Edit3 } from 'lucide-react'\n\ninterface ImageItem {\n  url: string\n  alt: string\n}\n\ninterface MultiImageEditorProps {\n  images: ImageItem[]\n  onChange: (images: ImageItem[]) => void\n  isEditing: boolean\n  onEditToggle: () => void\n}\n\nexport function MultiImageEditor({ images, onChange, isEditing, onEditToggle }: MultiImageEditorProps) {\n  const [newImageUrl, setNewImageUrl] = useState('')\n  const [editingIndex, setEditingIndex] = useState<number | null>(null)\n  const [editingUrl, setEditingUrl] = useState('')\n\n  const addImage = () => {\n    if (newImageUrl.trim()) {\n      const newImage: ImageItem = {\n        url: newImageUrl.trim(),\n        alt: `Product Image ${images.length + 1}`\n      }\n      onChange([...images, newImage])\n      setNewImageUrl('')\n    }\n  }\n\n  const removeImage = (index: number) => {\n    const newImages = images.filter((_, i) => i !== index)\n    onChange(newImages)\n  }\n\n  const startEditImage = (index: number) => {\n    setEditingIndex(index)\n    setEditingUrl(images[index].url)\n  }\n\n  const saveEditImage = () => {\n    if (editingIndex !== null && editingUrl.trim()) {\n      const newImages = [...images]\n      newImages[editingIndex] = {\n        ...newImages[editingIndex],\n        url: editingUrl.trim()\n      }\n      onChange(newImages)\n      setEditingIndex(null)\n      setEditingUrl('')\n    }\n  }\n\n  const cancelEditImage = () => {\n    setEditingIndex(null)\n    setEditingUrl('')\n  }\n\n  return (\n    <div className=\"bg-gray-50 rounded-lg p-4\">\n      <div className=\"flex items-center justify-between mb-2\">\n        <h4 className=\"font-semibold\">Product Images ({images.length})</h4>\n        {!isEditing && (\n          <button\n            onClick={onEditToggle}\n            className=\"text-primary hover:text-blue-600 text-sm font-medium\"\n          >\n            Edit\n          </button>\n        )}\n      </div>\n\n      {!isEditing ? (\n        // 显示模式\n        <div className=\"space-y-2\">\n          {images.length > 0 ? (\n            <div className=\"grid grid-cols-3 gap-2\">\n              {images.map((image, index) => (\n                <div key={index} className=\"relative\">\n                  <img \n                    src={image.url} \n                    alt={image.alt}\n                    className=\"w-full h-20 rounded object-cover\"\n                    onError={(e) => {\n                      e.currentTarget.src = 'https://avatars.githubusercontent.com/u/190834534?s=200&v=4'\n                    }}\n                  />\n                  <div className=\"absolute top-1 right-1 bg-black/50 text-white text-xs px-1 rounded\">\n                    {index + 1}\n                  </div>\n                </div>\n              ))}\n            </div>\n          ) : (\n            <p className=\"text-gray-500 text-sm\">No images uploaded</p>\n          )}\n        </div>\n      ) : (\n        // 编辑模式\n        <div className=\"space-y-4\">\n          {/* 现有图片列表 */}\n          <div className=\"space-y-2\">\n            {images.map((image, index) => (\n              <div key={index} className=\"flex items-center space-x-3 p-2 border rounded\">\n                <img \n                  src={image.url} \n                  alt={image.alt}\n                  className=\"w-12 h-12 rounded object-cover\"\n                  onError={(e) => {\n                    e.currentTarget.src = 'https://avatars.githubusercontent.com/u/190834534?s=200&v=4'\n                  }}\n                />\n                \n                {editingIndex === index ? (\n                  <div className=\"flex-1 flex space-x-2\">\n                    <input\n                      type=\"url\"\n                      value={editingUrl}\n                      onChange={(e) => setEditingUrl(e.target.value)}\n                      placeholder=\"https://example.com/image.jpg\"\n                      className=\"flex-1 px-2 py-1 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-primary focus:border-transparent\"\n                    />\n                    <button\n                      onClick={saveEditImage}\n                      className=\"px-2 py-1 bg-primary text-white rounded text-sm hover:bg-blue-600\"\n                    >\n                      Save\n                    </button>\n                    <button\n                      onClick={cancelEditImage}\n                      className=\"px-2 py-1 border border-gray-300 text-gray-700 rounded text-sm hover:bg-gray-50\"\n                    >\n                      Cancel\n                    </button>\n                  </div>\n                ) : (\n                  <>\n                    <div className=\"flex-1\">\n                      <p className=\"text-sm text-gray-800 break-all\">{image.url}</p>\n                      <p className=\"text-xs text-gray-500\">Image {index + 1}</p>\n                    </div>\n                    <button\n                      onClick={() => startEditImage(index)}\n                      className=\"p-1 text-gray-500 hover:text-primary\"\n                    >\n                      <Edit3 className=\"w-4 h-4\" />\n                    </button>\n                    <button\n                      onClick={() => removeImage(index)}\n                      className=\"p-1 text-red-500 hover:text-red-700\"\n                    >\n                      <X className=\"w-4 h-4\" />\n                    </button>\n                  </>\n                )}\n              </div>\n            ))}\n          </div>\n\n          {/* 添加新图片 */}\n          <div className=\"border-t pt-3\">\n            <div className=\"flex space-x-2\">\n              <input\n                type=\"url\"\n                value={newImageUrl}\n                onChange={(e) => setNewImageUrl(e.target.value)}\n                placeholder=\"https://example.com/new-image.jpg\"\n                className=\"flex-1 px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-primary focus:border-transparent\"\n                onKeyPress={(e) => {\n                  if (e.key === 'Enter') {\n                    addImage()\n                  }\n                }}\n              />\n              <button\n                onClick={addImage}\n                disabled={!newImageUrl.trim()}\n                className=\"px-3 py-2 bg-primary text-white rounded hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-1\"\n              >\n                <Plus className=\"w-4 h-4\" />\n                <span>Add</span>\n              </button>\n            </div>\n          </div>\n\n          {/* 编辑完成按钮 */}\n          <div className=\"flex justify-end pt-2 border-t\">\n            <button\n              onClick={onEditToggle}\n              className=\"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700\"\n            >\n              Done Editing\n            </button>\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}"],"names":[],"mappings":";;;;AAEA;AACA;AAAA;AAAA;AAHA;;;;AAiBO,SAAS,iBAAiB,EAAE,MAAM,EAAE,QAAQ,EAAE,SAAS,EAAE,YAAY,EAAyB;IACnG,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC/C,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IAChE,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAE7C,MAAM,WAAW;QACf,IAAI,YAAY,IAAI,IAAI;YACtB,MAAM,WAAsB;gBAC1B,KAAK,YAAY,IAAI;gBACrB,KAAK,CAAC,cAAc,EAAE,OAAO,MAAM,GAAG,GAAG;YAC3C;YACA,SAAS;mBAAI;gBAAQ;aAAS;YAC9B,eAAe;QACjB;IACF;IAEA,MAAM,cAAc,CAAC;QACnB,MAAM,YAAY,OAAO,MAAM,CAAC,CAAC,GAAG,IAAM,MAAM;QAChD,SAAS;IACX;IAEA,MAAM,iBAAiB,CAAC;QACtB,gBAAgB;QAChB,cAAc,MAAM,CAAC,MAAM,CAAC,GAAG;IACjC;IAEA,MAAM,gBAAgB;QACpB,IAAI,iBAAiB,QAAQ,WAAW,IAAI,IAAI;YAC9C,MAAM,YAAY;mBAAI;aAAO;YAC7B,SAAS,CAAC,aAAa,GAAG;gBACxB,GAAG,SAAS,CAAC,aAAa;gBAC1B,KAAK,WAAW,IAAI;YACtB;YACA,SAAS;YACT,gBAAgB;YAChB,cAAc;QAChB;IACF;IAEA,MAAM,kBAAkB;QACtB,gBAAgB;QAChB,cAAc;IAChB;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;;4BAAgB;4BAAiB,OAAO,MAAM;4BAAC;;;;;;;oBAC5D,CAAC,2BACA,8OAAC;wBACC,SAAS;wBACT,WAAU;kCACX;;;;;;;;;;;;YAMJ,CAAC,YACA,OAAO;0BACP,8OAAC;gBAAI,WAAU;0BACZ,OAAO,MAAM,GAAG,kBACf,8OAAC;oBAAI,WAAU;8BACZ,OAAO,GAAG,CAAC,CAAC,OAAO,sBAClB,8OAAC;4BAAgB,WAAU;;8CACzB,8OAAC;oCACC,KAAK,MAAM,GAAG;oCACd,KAAK,MAAM,GAAG;oCACd,WAAU;oCACV,SAAS,CAAC;wCACR,EAAE,aAAa,CAAC,GAAG,GAAG;oCACxB;;;;;;8CAEF,8OAAC;oCAAI,WAAU;8CACZ,QAAQ;;;;;;;2BAVH;;;;;;;;;yCAgBd,8OAAC;oBAAE,WAAU;8BAAwB;;;;;;;;;;uBAIzC,OAAO;0BACP,8OAAC;gBAAI,WAAU;;kCAEb,8OAAC;wBAAI,WAAU;kCACZ,OAAO,GAAG,CAAC,CAAC,OAAO,sBAClB,8OAAC;gCAAgB,WAAU;;kDACzB,8OAAC;wCACC,KAAK,MAAM,GAAG;wCACd,KAAK,MAAM,GAAG;wCACd,WAAU;wCACV,SAAS,CAAC;4CACR,EAAE,aAAa,CAAC,GAAG,GAAG;wCACxB;;;;;;oCAGD,iBAAiB,sBAChB,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDACC,MAAK;gDACL,OAAO;gDACP,UAAU,CAAC,IAAM,cAAc,EAAE,MAAM,CAAC,KAAK;gDAC7C,aAAY;gDACZ,WAAU;;;;;;0DAEZ,8OAAC;gDACC,SAAS;gDACT,WAAU;0DACX;;;;;;0DAGD,8OAAC;gDACC,SAAS;gDACT,WAAU;0DACX;;;;;;;;;;;6DAKH;;0DACE,8OAAC;gDAAI,WAAU;;kEACb,8OAAC;wDAAE,WAAU;kEAAmC,MAAM,GAAG;;;;;;kEACzD,8OAAC;wDAAE,WAAU;;4DAAwB;4DAAO,QAAQ;;;;;;;;;;;;;0DAEtD,8OAAC;gDACC,SAAS,IAAM,eAAe;gDAC9B,WAAU;0DAEV,cAAA,8OAAC,0MAAA,CAAA,QAAK;oDAAC,WAAU;;;;;;;;;;;0DAEnB,8OAAC;gDACC,SAAS,IAAM,YAAY;gDAC3B,WAAU;0DAEV,cAAA,8OAAC,4LAAA,CAAA,IAAC;oDAAC,WAAU;;;;;;;;;;;;;;+BAhDX;;;;;;;;;;kCAyDd,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCACC,MAAK;oCACL,OAAO;oCACP,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;oCAC9C,aAAY;oCACZ,WAAU;oCACV,YAAY,CAAC;wCACX,IAAI,EAAE,GAAG,KAAK,SAAS;4CACrB;wCACF;oCACF;;;;;;8CAEF,8OAAC;oCACC,SAAS;oCACT,UAAU,CAAC,YAAY,IAAI;oCAC3B,WAAU;;sDAEV,8OAAC,kMAAA,CAAA,OAAI;4CAAC,WAAU;;;;;;sDAChB,8OAAC;sDAAK;;;;;;;;;;;;;;;;;;;;;;;kCAMZ,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BACC,SAAS;4BACT,WAAU;sCACX;;;;;;;;;;;;;;;;;;;;;;;AAQb","debugId":null}},
    {"offset": {"line": 1317, "column": 0}, "map": {"version":3,"sources":["file:///Users/liyao/Code/workwork/frontend/Growth_OS/src/components/ProductEditModal.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport { createPortal } from 'react-dom'\nimport { Project } from '@/types'\nimport { ProductsService } from '@/lib/products'\nimport { SubscriptionPricing } from './create/SubscriptionPricing'\nimport { MultiImageEditor } from './create/MultiImageEditor'\nimport { X, Save, Loader2 } from 'lucide-react'\n\ninterface ProductEditModalProps {\n  project: Project\n  isOpen: boolean\n  onClose: () => void\n  onUpdate: () => void\n}\n\nexport function ProductEditModal({ project, isOpen, onClose, onUpdate }: ProductEditModalProps) {\n  const [formData, setFormData] = useState({\n    name: project.name,\n    description: project.description,\n    price: project.price,\n    currency: project.currency,\n    category: project.category || 'development',\n    status: project.status || 'active',\n    images: project.images || [],\n    pricing_model: project.pricing_model || 'one_time',\n    subscription_period: project.subscription_period,\n    subscription_prices: project.subscription_prices,\n    subscription_duration: project.subscription_duration ?? 1\n  })\n  const [loading, setLoading] = useState(false)\n  const [mounted, setMounted] = useState(false)\n\n  useEffect(() => {\n    setMounted(true)\n  }, [])\n\n  useEffect(() => {\n    // Reset form data when project changes\n    setFormData({\n      name: project.name,\n      description: project.description,\n      price: project.price,\n      currency: project.currency,\n      category: project.category || 'development',\n      status: project.status || 'active',\n      images: project.images || [],\n      pricing_model: project.pricing_model || 'one_time',\n      subscription_period: project.subscription_period,\n      subscription_prices: project.subscription_prices,\n      subscription_duration: project.subscription_duration ?? 1\n    })\n  }, [project])\n\n  const handleSave = async () => {\n    setLoading(true)\n    try {\n      await ProductsService.updateProduct(project.id, {\n        name: formData.name,\n        description: formData.description,\n        price: formData.price,\n        currency: formData.currency,\n        category: formData.category,\n        status: formData.status as 'active' | 'inactive',\n        images: formData.images,\n        pricing_model: formData.pricing_model,\n        subscription_period: formData.subscription_period,\n        subscription_prices: formData.subscription_prices,\n        subscription_price_per_period: formData.pricing_model === 'subscription' \n          ? (formData.subscription_prices?.[formData.subscription_period || 'monthly'] ?? formData.price ?? 0)\n          : null,\n        subscription_duration: formData.pricing_model === 'subscription' ? formData.subscription_duration : null,\n        product_type: formData.pricing_model === 'subscription' ? 'subscription' : 'product'\n      })\n      onUpdate()\n    } catch (error) {\n      console.error('Failed to update product:', error)\n      alert('Failed to update product')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handleInputChange = (field: string, value: string | number | Array<{url: string; alt: string}>) => {\n    setFormData(prev => ({ ...prev, [field]: value }))\n  }\n\n  const handlePricingChange = (data: {\n    pricing_model: 'one_time' | 'subscription'\n    price: number\n    subscription_period?: 'daily' | 'weekly' | 'monthly' | 'yearly'\n    subscription_prices?: { daily?: number; weekly?: number; monthly?: number; yearly?: number }\n    subscription_duration?: number\n  }) => {\n    setFormData(prev => ({\n      ...prev,\n      pricing_model: data.pricing_model,\n      price: data.price,\n      subscription_period: data.subscription_period,\n      subscription_prices: data.subscription_prices,\n      subscription_duration: data.subscription_duration ?? 1\n    }))\n  }\n\n  if (!isOpen || !mounted) return null\n\n  const modalContent = (\n    <div \n      className=\"fixed inset-0 backdrop-blur-sm bg-white/20 flex items-center justify-center z-50 animate-fadeIn\" \n      onClick={onClose}\n    >\n      <div \n        className=\"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto m-4 animate-slideUpAndScale\" \n        onClick={(e) => e.stopPropagation()}\n      >\n        {/* Header */}\n        <div className=\"sticky top-0 bg-white border-b p-6 flex items-center justify-between z-10\">\n          <h2 className=\"text-2xl font-bold text-gray-900\">Edit Product</h2>\n          <button \n            onClick={onClose}\n            className=\"text-gray-400 hover:text-gray-600 p-2\"\n          >\n            <X className=\"w-6 h-6\" />\n          </button>\n        </div>\n\n        {/* Content */}\n        <div className=\"p-6 space-y-8\">\n          {/* Basic Information */}\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n            {/* Left Column - Basic Info */}\n            <div className=\"space-y-6\">\n              {/* Name */}\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Product Name\n                </label>\n                <input\n                  type=\"text\"\n                  value={formData.name}\n                  onChange={(e) => handleInputChange('name', e.target.value)}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent\"\n                />\n              </div>\n\n              {/* Description */}\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Description\n                </label>\n                <textarea\n                  value={formData.description}\n                  onChange={(e) => handleInputChange('description', e.target.value)}\n                  rows={4}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent\"\n                />\n              </div>\n\n              {/* Category */}\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Category\n                </label>\n                <select\n                  value={formData.category}\n                  onChange={(e) => handleInputChange('category', e.target.value)}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent\"\n                >\n                  <option value=\"development\">Development</option>\n                  <option value=\"education\">Education</option>\n                  <option value=\"ai\">AI</option>\n                  <option value=\"crypto\">Crypto</option>\n                  <option value=\"course\">Course</option>\n                  <option value=\"tools\">Tools</option>\n                  <option value=\"other\">Other</option>\n                </select>\n              </div>\n\n              {/* Status */}\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Status\n                </label>\n                <select\n                  value={formData.status}\n                  onChange={(e) => handleInputChange('status', e.target.value)}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent\"\n                >\n                  <option value=\"active\">Active</option>\n                  <option value=\"inactive\">Inactive</option>\n                </select>\n              </div>\n            </div>\n\n            {/* Right Column - Images */}\n            <div>\n              <MultiImageEditor\n                images={formData.images}\n                onChange={(images) => handleInputChange('images', images)}\n                isEditing={true}\n                onEditToggle={() => {}}\n              />\n            </div>\n          </div>\n\n          {/* Pricing */}\n          <div>\n            <SubscriptionPricing\n              currency={formData.currency}\n              pricingModel={formData.pricing_model}\n              oneTimePrice={formData.price}\n              subscriptionPeriod={formData.subscription_period}\n              subscriptionPrices={formData.subscription_prices}\n              subscriptionDuration={formData.subscription_duration}\n              onChange={handlePricingChange}\n            />\n          </div>\n        </div>\n\n        {/* Footer */}\n        <div className=\"sticky bottom-0 bg-white border-t p-6 flex justify-end gap-4\">\n          <button\n            onClick={onClose}\n            disabled={loading}\n            className=\"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 disabled:opacity-50\"\n          >\n            Cancel\n          </button>\n          <button\n            onClick={handleSave}\n            disabled={loading}\n            className=\"px-6 py-2 bg-primary text-white rounded-lg hover:bg-blue-600 disabled:opacity-50 flex items-center gap-2\"\n          >\n            {loading ? (\n              <>\n                <Loader2 className=\"w-4 h-4 animate-spin\" />\n                Saving...\n              </>\n            ) : (\n              <>\n                <Save className=\"w-4 h-4\" />\n                Save Changes\n              </>\n            )}\n          </button>\n        </div>\n      </div>\n    </div>\n  )\n\n  // Use mounted state instead of typeof window check to prevent hydration mismatch\n  return mounted ? createPortal(modalContent, document.body) : null\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1789, "column": 0}, "map": {"version":3,"sources":["file:///Users/liyao/Code/workwork/frontend/Growth_OS/src/lib/constants.ts"],"sourcesContent":["import { TagType } from '@/types'\n\nexport const TAG_COLORS: Record<TagType, string> = {\n  ai: 'bg-[#FFDCF9] text-tag-ai',\n  crypto: 'bg-[#C7FFCC] text-tag-crypto', \n  education: 'bg-[#ABD5FF] text-tag-education',\n}\n\nexport const FILTER_OPTIONS = [\n  { key: 'time' as const, label: 'Time' },\n  { key: 'price' as const, label: 'Price' },\n  { key: 'likes' as const, label: 'Likes' },\n  { key: 'views' as const, label: 'Views' },\n]\n\nexport const DEFAULT_PROJECT_IMAGE = '/project-image.png'\n\nexport const BRAND_LOGO_URL = '/growthos-logo-new.png'\n\nexport const DEFAULT_USER = {\n  username: 'Username',\n  walletAddress: 'Wallet Address',\n  avatar: 'https://pbs.twimg.com/profile_images/1912362795879809025/HbzzOBdl_400x400.jpg'\n}"],"names":[],"mappings":";;;;;;;AAEO,MAAM,aAAsC;IACjD,IAAI;IACJ,QAAQ;IACR,WAAW;AACb;AAEO,MAAM,iBAAiB;IAC5B;QAAE,KAAK;QAAiB,OAAO;IAAO;IACtC;QAAE,KAAK;QAAkB,OAAO;IAAQ;IACxC;QAAE,KAAK;QAAkB,OAAO;IAAQ;IACxC;QAAE,KAAK;QAAkB,OAAO;IAAQ;CACzC;AAEM,MAAM,wBAAwB;AAE9B,MAAM,iBAAiB;AAEvB,MAAM,eAAe;IAC1B,UAAU;IACV,eAAe;IACf,QAAQ;AACV","debugId":null}},
    {"offset": {"line": 1830, "column": 0}, "map": {"version":3,"sources":["file:///Users/liyao/Code/workwork/frontend/Growth_OS/src/components/header/BrandLogo.tsx"],"sourcesContent":["import Image from 'next/image'\nimport { BRAND_LOGO_URL } from '@/lib/constants'\n\nexport function BrandLogo() {\n  return (\n    <button \n      onClick={() => window.location.href = '/'}\n      className=\"rounded-full px-2 py-1 h-10 flex items-center hover:opacity-80 transition-opacity cursor-pointer\" \n      style={{backgroundColor: '#16b4f2'}}\n    >\n      <Image \n        src={BRAND_LOGO_URL}\n        alt=\"GrowthOS Logo\" \n        width={160}\n        height={40}\n        className=\"h-10 w-auto object-contain rounded-lg\"\n        quality={100}\n        priority\n        unoptimized\n      />\n    </button>\n  )\n}"],"names":[],"mappings":";;;;AAAA;AACA;;;;AAEO,SAAS;IACd,qBACE,8OAAC;QACC,SAAS,IAAM,OAAO,QAAQ,CAAC,IAAI,GAAG;QACtC,WAAU;QACV,OAAO;YAAC,iBAAiB;QAAS;kBAElC,cAAA,8OAAC,6HAAA,CAAA,UAAK;YACJ,KAAK,uHAAA,CAAA,iBAAc;YACnB,KAAI;YACJ,OAAO;YACP,QAAQ;YACR,WAAU;YACV,SAAS;YACT,QAAQ;YACR,WAAW;;;;;;;;;;;AAInB","debugId":null}},
    {"offset": {"line": 1870, "column": 0}, "map": {"version":3,"sources":["file:///Users/liyao/Code/workwork/frontend/Growth_OS/src/components/auth/AuthModal.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport { X, Mail, Lock, User, Eye, EyeOff } from 'lucide-react'\nimport { useAuth } from '@/providers/AuthProvider'\n\ninterface AuthModalProps {\n  isOpen: boolean\n  onClose: () => void\n  defaultMode?: 'signin' | 'signup'\n}\n\nexport function AuthModal({ isOpen, onClose, defaultMode = 'signin' }: AuthModalProps) {\n  const [mode, setMode] = useState(defaultMode)\n  const [email, setEmail] = useState('')\n  const [password, setPassword] = useState('')\n  const [username, setUsername] = useState('')\n  const [showPassword, setShowPassword] = useState(false)\n  const [loading, setLoading] = useState(false)\n  const [error, setError] = useState('')\n\n  const { signIn, signUp } = useAuth()\n\n  if (!isOpen) return null\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    setLoading(true)\n    setError('')\n\n    try {\n      if (mode === 'signup') {\n        await signUp(email, password, username)\n      } else {\n        await signIn(email, password)\n      }\n      onClose()\n    } catch (err: unknown) {\n      setError(err instanceof Error ? err.message : 'An error occurred')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const switchMode = () => {\n    setMode(mode === 'signin' ? 'signup' : 'signin')\n    setError('')\n  }\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-white rounded-xl max-w-md w-full p-6 relative\">\n        <button\n          onClick={onClose}\n          className=\"absolute top-4 right-4 text-gray-400 hover:text-gray-600\"\n        >\n          <X className=\"w-5 h-5\" />\n        </button>\n\n        <div className=\"text-center mb-6\">\n          <h2 className=\"text-2xl font-bold text-gray-900 mb-2\">\n            {mode === 'signin' ? 'Welcome Back!' : 'Join WorkWork'}\n          </h2>\n          <p className=\"text-gray-600\">\n            {mode === 'signin' \n              ? 'Sign in to access your dashboard' \n              : 'Create your account to get started'\n            }\n          </p>\n        </div>\n\n        {error && (\n          <div className=\"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-lg mb-4 text-sm\">\n            {error}\n          </div>\n        )}\n\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          {mode === 'signup' && (\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Username\n              </label>\n              <div className=\"relative\">\n                <User className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5\" />\n                <input\n                  type=\"text\"\n                  required\n                  value={username}\n                  onChange={(e) => setUsername(e.target.value)}\n                  className=\"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent\"\n                  placeholder=\"Your username\"\n                />\n              </div>\n            </div>\n          )}\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Email\n            </label>\n            <div className=\"relative\">\n              <Mail className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5\" />\n              <input\n                type=\"email\"\n                required\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                className=\"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent\"\n                placeholder=\"your@email.com\"\n              />\n            </div>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Password\n            </label>\n            <div className=\"relative\">\n              <Lock className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5\" />\n              <input\n                type={showPassword ? 'text' : 'password'}\n                required\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n                className=\"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent\"\n                placeholder=\"Enter your password\"\n              />\n              <button\n                type=\"button\"\n                onClick={() => setShowPassword(!showPassword)}\n                className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600\"\n              >\n                {showPassword ? <EyeOff className=\"w-5 h-5\" /> : <Eye className=\"w-5 h-5\" />}\n              </button>\n            </div>\n          </div>\n\n          <button\n            type=\"submit\"\n            disabled={loading}\n            className=\"w-full bg-primary text-white py-3 rounded-lg font-medium hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n          >\n            {loading ? 'Processing...' : (mode === 'signin' ? 'Sign In' : 'Create Account')}\n          </button>\n        </form>\n\n        <div className=\"mt-6 text-center\">\n          <p className=\"text-gray-600\">\n            {mode === 'signin' ? \"Don't have an account? \" : \"Already have an account? \"}\n            <button\n              onClick={switchMode}\n              className=\"text-primary hover:text-blue-600 font-medium\"\n            >\n              {mode === 'signin' ? 'Sign up' : 'Sign in'}\n            </button>\n          </p>\n        </div>\n\n        {mode === 'signin' && (\n          <div className=\"mt-4 text-center\">\n            <button className=\"text-sm text-gray-500 hover:text-gray-700\">\n              Forgot your password?\n            </button>\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2202, "column": 0}, "map": {"version":3,"sources":["file:///Users/liyao/Code/workwork/frontend/Growth_OS/src/components/Header.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport Image from 'next/image'\nimport { useRouter } from 'next/navigation'\nimport { User, LogOut, Settings, Package, ShoppingBag } from 'lucide-react'\nimport { BrandLogo } from './header/BrandLogo'\nimport { AuthModal } from './auth/AuthModal'\nimport { useAuth } from '@/providers/AuthProvider'\n\nexport function Header() {\n  const [showDropdown, setShowDropdown] = useState(false)\n  const [showAuthModal, setShowAuthModal] = useState(false)\n  const [authMode, setAuthMode] = useState<'signin' | 'signup'>('signin')\n  const router = useRouter()\n  \n  const { user, profile, signOut } = useAuth()\n\n  const handleAuthClick = (mode: 'signin' | 'signup') => {\n    setAuthMode(mode)\n    setShowAuthModal(true)\n  }\n\n  const handleSignOut = async () => {\n    await signOut()\n    setShowDropdown(false)\n  }\n\n  return (\n    <>\n      <div className=\"mx-6 mt-4 h-14 bg-primary flex items-center justify-between px-2 shadow-button rounded-full\">\n        <BrandLogo />\n        \n        <div className=\"flex items-center space-x-4\">\n          {user && profile ? (\n            // Authenticated user\n            <div className=\"relative\">\n              <button\n                onClick={() => setShowDropdown(!showDropdown)}\n                className=\"flex items-center space-x-2 bg-white hover:bg-gray-50 rounded-full px-3 py-2 transition-colors shadow-sm\"\n              >\n                <Image\n                  src={profile.avatar}\n                  alt={profile.username}\n                  width={32}\n                  height={32}\n                  className=\"w-8 h-8 rounded-full\"\n                />\n                <span className=\"text-gray-900 font-medium hidden sm:block\">\n                  {profile.username}\n                </span>\n              </button>\n\n              {showDropdown && (\n                <div className=\"absolute right-0 mt-2 w-72 bg-white rounded-lg shadow-lg py-2 z-50\">\n                  <div className=\"px-4 py-3 border-b border-gray-100 bg-white\">\n                    <p className=\"text-sm font-medium text-gray-900 truncate\">{profile.username}</p>\n                    <p className=\"text-xs text-gray-500 truncate\">\n                      {profile.walletAddress \n                        ? `${profile.walletAddress.slice(0, 6)}...${profile.walletAddress.slice(-4)}`\n                        : profile.email\n                      }\n                    </p>\n                  </div>\n                  \n                  <button\n                    onClick={() => {\n                      router.push('/profile')\n                      setShowDropdown(false)\n                    }}\n                    className=\"w-full flex items-center space-x-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-50\"\n                  >\n                    <User className=\"w-4 h-4\" />\n                    <span>Profile</span>\n                  </button>\n                  \n                  <button\n                    onClick={() => {\n                      router.push('/projects')\n                      setShowDropdown(false)\n                    }}\n                    className=\"w-full flex items-center space-x-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-50\"\n                  >\n                    <Package className=\"w-4 h-4\" />\n                    <span>My Projects</span>\n                  </button>\n                  \n                  <button\n                    onClick={() => {\n                      router.push('/orders')\n                      setShowDropdown(false)\n                    }}\n                    className=\"w-full flex items-center space-x-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-50\"\n                  >\n                    <ShoppingBag className=\"w-4 h-4\" />\n                    <span>My Orders</span>\n                  </button>\n                  \n                  <button\n                    onClick={() => {\n                      router.push('/settings')\n                      setShowDropdown(false)\n                    }}\n                    className=\"w-full flex items-center space-x-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-50\"\n                  >\n                    <Settings className=\"w-4 h-4\" />\n                    <span>Settings</span>\n                  </button>\n                  \n                  <div className=\"border-t border-gray-100 mt-2 pt-2\">\n                    <button\n                      onClick={handleSignOut}\n                      className=\"w-full flex items-center space-x-2 px-4 py-2 text-sm text-red-600 hover:bg-red-50\"\n                    >\n                      <LogOut className=\"w-4 h-4\" />\n                      <span>Sign Out</span>\n                    </button>\n                  </div>\n                </div>\n              )}\n            </div>\n          ) : (\n            // Unauthenticated user\n            <div className=\"flex items-center space-x-2\">\n              <button\n                onClick={() => handleAuthClick('signin')}\n                className=\"text-white hover:text-white/80 font-medium px-4 py-2 rounded-full hover:bg-white/10 transition-colors\"\n              >\n                Sign In\n              </button>\n              <button\n                onClick={() => handleAuthClick('signup')}\n                className=\"bg-white text-primary hover:bg-white/90 font-medium px-4 py-2 rounded-full transition-colors\"\n              >\n                Sign Up\n              </button>\n            </div>\n          )}\n        </div>\n      </div>\n\n      <AuthModal\n        isOpen={showAuthModal}\n        onClose={() => setShowAuthModal(false)}\n        defaultMode={authMode}\n      />\n    </>\n  )\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2518, "column": 0}, "map": {"version":3,"sources":["file:///Users/liyao/Code/workwork/frontend/Growth_OS/src/app/projects/page.tsx"],"sourcesContent":["'use client'\n\nimport { useEffect, useState, useCallback } from 'react'\nimport { useAuth } from '@/providers/AuthProvider'\nimport { ProductsService } from '@/lib/products'\nimport { Project } from '@/types'\nimport { ProductEditModal } from '@/components/ProductEditModal'\nimport { Header } from '@/components/Header'\nimport { \n  Plus, \n  Search, \n  Grid, \n  List, \n  Eye, \n  Heart, \n  Edit, \n  Trash2, \n  RefreshCw,\n  AlertCircle,\n  Package,\n  TrendingUp,\n  Calendar\n} from 'lucide-react'\nimport { useRouter } from 'next/navigation'\nimport { TAG_COLORS, DEFAULT_PROJECT_IMAGE } from '@/lib/constants'\n\n// Force dynamic rendering due to auth usage\nexport const dynamic = 'force-dynamic'\n\nexport default function MyProjectsPage() {\n  const { user, loading: authLoading } = useAuth()\n  const router = useRouter()\n  const [projects, setProjects] = useState<Project[]>([])\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState<string | null>(null)\n  const [searchQuery, setSearchQuery] = useState('')\n  const [statusFilter, setStatusFilter] = useState<'all' | 'active' | 'inactive'>('all')\n  const [viewMode, setViewMode] = useState<'grid' | 'list'>('list') // Default to list to match orders\n  const [editingProject, setEditingProject] = useState<Project | null>(null)\n\n  const loadMyProjects = useCallback(async () => {\n    if (!user) return\n    \n    setLoading(true)\n    setError(null)\n    try {\n      // Get user products directly (more efficient)\n      const myProjects = await ProductsService.getUserProducts(user.id)\n      setProjects(myProjects)\n    } catch (err) {\n      console.error('Failed to load projects:', err)\n      setError(err instanceof Error ? err.message : 'Failed to load projects')\n    } finally {\n      setLoading(false)\n    }\n  }, [user])\n\n\n  useEffect(() => {\n    if (!user && !authLoading) {\n      router.push('/')\n      return\n    }\n    if (user) {\n      loadMyProjects()\n    }\n  }, [user, authLoading, router, loadMyProjects])\n\n  const handleProjectUpdate = async () => {\n    await loadMyProjects()\n    setEditingProject(null)\n  }\n\n  const handleProjectDelete = async (projectId: string) => {\n    if (!confirm('Are you sure you want to delete this project?')) return\n    \n    try {\n      await ProductsService.deleteProduct(projectId)\n      await loadMyProjects()\n    } catch (error) {\n      console.error('Failed to delete project:', error)\n      alert('Failed to delete project')\n    }\n  }\n\n  const getStatusColor = (status?: string) => {\n    switch (status) {\n      case 'active':\n        return 'bg-green-100 text-green-800'\n      case 'inactive':\n        return 'bg-gray-100 text-gray-800'\n      case 'deleted':\n        return 'bg-red-100 text-red-800'\n      default:\n        return 'bg-gray-100 text-gray-800'\n    }\n  }\n\n  const formatDate = (dateString?: string) => {\n    if (!dateString) return 'Unknown'\n    return new Date(dateString).toLocaleDateString('en-US', {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric'\n    })\n  }\n\n  const filteredProjects = projects.filter(project => {\n    const matchesSearch = project.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\n                         project.description.toLowerCase().includes(searchQuery.toLowerCase())\n    const matchesStatus = statusFilter === 'all' || project.status === statusFilter\n    return matchesSearch && matchesStatus\n  })\n\n  if (authLoading) {\n    return (\n      <div className=\"min-h-screen bg-bg-blue flex items-center justify-center\">\n        <div className=\"text-white text-xl\">Loading...</div>\n      </div>\n    )\n  }\n\n  if (!user) {\n    return (\n      <div className=\"min-h-screen bg-bg-blue flex items-center justify-center\">\n        <div className=\"text-center text-white\">\n          <h2 className=\"text-2xl font-bold mb-4\">Access Denied</h2>\n          <p>Please log in to view your projects.</p>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"min-h-screen bg-bg-blue\">\n      <Header />\n      <div className=\"container mx-auto px-4 py-8\">\n        {/* Header */}\n        <div className=\"mb-8\">\n          <h1 className=\"text-3xl font-bold mb-2\" style={{ color: '#38B6FF' }}>My Projects</h1>\n          <p style={{ color: '#38B6FF', opacity: 0.8 }}>Manage and edit your published products</p>\n        </div>\n\n        {/* Statistics */}\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6\">\n          <div className=\"bg-white rounded-lg p-6 shadow-sm\">\n            <div className=\"flex items-center\">\n              <Package className=\"w-8 h-8 text-blue-600\" />\n              <div className=\"ml-4\">\n                <p className=\"text-sm font-medium text-gray-600\">Total Projects</p>\n                <p className=\"text-2xl font-bold text-gray-900\">{projects.length}</p>\n              </div>\n            </div>\n          </div>\n          <div className=\"bg-white rounded-lg p-6 shadow-sm\">\n            <div className=\"flex items-center\">\n              <TrendingUp className=\"w-8 h-8 text-green-600\" />\n              <div className=\"ml-4\">\n                <p className=\"text-sm font-medium text-gray-600\">Active</p>\n                <p className=\"text-2xl font-bold text-green-600\">\n                  {projects.filter(p => p.status === 'active').length}\n                </p>\n              </div>\n            </div>\n          </div>\n          <div className=\"bg-white rounded-lg p-6 shadow-sm\">\n            <div className=\"flex items-center\">\n              <Eye className=\"w-8 h-8 text-blue-600\" />\n              <div className=\"ml-4\">\n                <p className=\"text-sm font-medium text-gray-600\">Total Views</p>\n                <p className=\"text-2xl font-bold text-blue-600\">\n                  {projects.reduce((sum, p) => sum + (p.views || 0), 0)}\n                </p>\n              </div>\n            </div>\n          </div>\n          <div className=\"bg-white rounded-lg p-6 shadow-sm\">\n            <div className=\"flex items-center\">\n              <Heart className=\"w-8 h-8 text-pink-600\" />\n              <div className=\"ml-4\">\n                <p className=\"text-sm font-medium text-gray-600\">Total Likes</p>\n                <p className=\"text-2xl font-bold text-pink-600\">\n                  {projects.reduce((sum, p) => sum + (p.likes || 0), 0)}\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Controls */}\n        <div className=\"bg-white rounded-lg p-6 mb-6\">\n          <div className=\"flex flex-col md:flex-row gap-4 items-start md:items-center justify-between\">\n            {/* Search */}\n            <div className=\"relative flex-1 max-w-md\">\n              <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5\" />\n              <input\n                type=\"text\"\n                placeholder=\"Search projects...\"\n                value={searchQuery}\n                onChange={(e) => setSearchQuery(e.target.value)}\n                className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent\"\n              />\n            </div>\n\n            <div className=\"flex items-center gap-4\">\n              {/* Status Filter */}\n              <select\n                value={statusFilter}\n                onChange={(e) => setStatusFilter(e.target.value as 'all' | 'active' | 'inactive')}\n                className=\"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-primary focus:border-transparent\"\n              >\n                <option value=\"all\">All Status</option>\n                <option value=\"active\">Active</option>\n                <option value=\"inactive\">Inactive</option>\n              </select>\n\n              {/* View Mode Toggle */}\n              <div className=\"flex bg-gray-100 rounded-lg p-1\">\n                <button\n                  onClick={() => setViewMode('list')}\n                  className={`px-3 py-2 rounded-md text-sm font-medium transition-colors ${\n                    viewMode === 'list'\n                      ? 'bg-primary text-white'\n                      : 'text-gray-600 hover:text-gray-800'\n                  }`}\n                >\n                  <List className=\"w-4 h-4\" />\n                </button>\n                <button\n                  onClick={() => setViewMode('grid')}\n                  className={`px-3 py-2 rounded-md text-sm font-medium transition-colors ${\n                    viewMode === 'grid'\n                      ? 'bg-primary text-white'\n                      : 'text-gray-600 hover:text-gray-800'\n                  }`}\n                >\n                  <Grid className=\"w-4 h-4\" />\n                </button>\n              </div>\n\n              {/* Refresh Button */}\n              <button\n                onClick={loadMyProjects}\n                disabled={loading}\n                className=\"flex items-center gap-2 px-3 py-2 text-sm text-primary hover:bg-blue-50 rounded-lg transition-colors\"\n              >\n                <RefreshCw className={`w-4 h-4 ${loading ? 'animate-spin' : ''}`} />\n                Refresh\n              </button>\n\n              {/* Create Button */}\n              <button\n                onClick={() => router.push('/create')}\n                className=\"flex items-center gap-2 bg-primary text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors\"\n              >\n                <Plus className=\"w-4 h-4\" />\n                New Project\n              </button>\n            </div>\n          </div>\n        </div>\n\n        {/* Error State */}\n        {error && (\n          <div className=\"bg-red-50 border border-red-200 rounded-lg p-4 mb-6\">\n            <div className=\"flex items-start gap-3\">\n              <AlertCircle className=\"w-5 h-5 text-red-600 mt-0.5 flex-shrink-0\" />\n              <div>\n                <p className=\"text-red-800 font-medium\">Failed to load projects</p>\n                <p className=\"text-red-700 text-sm mt-1\">{error}</p>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Loading State */}\n        {loading && (\n          <div className=\"bg-white rounded-lg p-8 text-center\">\n            <RefreshCw className=\"w-8 h-8 text-primary animate-spin mx-auto mb-4\" />\n            <p className=\"text-gray-600\">Loading your projects...</p>\n          </div>\n        )}\n\n        {/* Empty State */}\n        {!loading && filteredProjects.length === 0 && (\n          <div className=\"bg-white rounded-lg p-8 text-center\">\n            <Package className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\n            {projects.length === 0 ? (\n              <>\n                <h3 className=\"text-lg font-semibold text-gray-800 mb-2\">No projects yet</h3>\n                <p className=\"text-gray-600 mb-4\">Create your first project to get started</p>\n                <button\n                  onClick={() => router.push('/create')}\n                  className=\"bg-primary text-white px-6 py-3 rounded-lg hover:bg-blue-600 transition-colors\"\n                >\n                  Create Project\n                </button>\n              </>\n            ) : (\n              <>\n                <h3 className=\"text-lg font-semibold text-gray-800 mb-2\">No projects found</h3>\n                <p className=\"text-gray-600\">Try adjusting your search or filters</p>\n              </>\n            )}\n          </div>\n        )}\n\n        {/* Projects List */}\n        {!loading && filteredProjects.length > 0 && (\n          <>\n            {viewMode === 'list' ? (\n              <div className=\"space-y-4\">\n                {filteredProjects.map((project) => (\n                  <div key={project.id} className=\"bg-white rounded-lg p-6 shadow-sm border border-gray-200\">\n                    <div className=\"flex flex-col lg:flex-row gap-4\">\n                      {/* Product Info */}\n                      <div className=\"flex gap-4 flex-1\">\n                        <div \n                          className=\"w-20 h-20 rounded-lg bg-cover bg-center flex-shrink-0\"\n                          style={{\n                            backgroundImage: `url(${project.image || project.image_url || DEFAULT_PROJECT_IMAGE})`\n                          }}\n                        />\n                        <div className=\"flex-1\">\n                          <div className=\"flex items-start justify-between mb-2\">\n                            <h3 className=\"font-semibold text-gray-800 text-lg\">{project.name}</h3>\n                            <span className={`px-2 py-1 rounded-full text-xs font-medium ${getStatusColor(project.status)}`}>\n                              {(project.status || 'inactive').charAt(0).toUpperCase() + (project.status || 'inactive').slice(1)}\n                            </span>\n                          </div>\n                          \n                          <p className=\"text-gray-600 text-sm mb-2 line-clamp-2\">{project.description}</p>\n\n                          {/* Product Type & Pricing */}\n                          <div className=\"flex items-center gap-4 mb-2\">\n                            <div className=\"flex items-center gap-2\">\n                              {project.product_type === 'subscription' ? (\n                                <span className=\"inline-flex items-center px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full\">\n                                  <Calendar className=\"w-3 h-3 mr-1\" />\n                                  Subscription\n                                </span>\n                              ) : (\n                                <span className=\"inline-flex items-center px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full\">\n                                  <Package className=\"w-3 h-3 mr-1\" />\n                                  Product\n                                </span>\n                              )}\n                            </div>\n                            \n                            <div className=\"text-lg font-semibold text-primary\">\n                              {(project.price / 100).toFixed(3)} ETH\n                            </div>\n                          </div>\n\n                          {/* Project Stats */}\n                          <div className=\"flex flex-wrap gap-4 text-sm text-gray-500\">\n                            <span className=\"flex items-center gap-1\">\n                              <Eye className=\"w-3 h-3\" />\n                              {project.views || 0} views\n                            </span>\n                            <span className=\"flex items-center gap-1\">\n                              <Heart className=\"w-3 h-3\" />\n                              {project.likes || 0} likes\n                            </span>\n                            <span className=\"flex items-center gap-1\">\n                              <Calendar className=\"w-3 h-3\" />\n                              {formatDate(project.created_at)}\n                            </span>\n                            {project.category && (\n                              <span className={`px-2 py-0.5 rounded text-xs ${TAG_COLORS[project.category as keyof typeof TAG_COLORS] || 'bg-gray-100 text-gray-800'}`}>\n                                {project.category}\n                              </span>\n                            )}\n                          </div>\n                        </div>\n                      </div>\n\n                      {/* Actions */}\n                      <div className=\"flex flex-col gap-2 min-w-[120px]\">\n                        <button\n                          onClick={() => window.open(`/?product=${project.id}`, '_blank')}\n                          className=\"flex items-center justify-center gap-2 px-3 py-2 border border-gray-300 text-gray-600 text-sm rounded-lg hover:bg-gray-50 transition-colors\"\n                        >\n                          <Eye className=\"w-4 h-4\" />\n                          Preview\n                        </button>\n                        <button\n                          onClick={() => setEditingProject(project)}\n                          className=\"flex items-center justify-center gap-2 px-3 py-2 bg-primary text-white text-sm rounded-lg hover:bg-blue-600 transition-colors\"\n                        >\n                          <Edit className=\"w-4 h-4\" />\n                          Edit\n                        </button>\n                        <button\n                          onClick={() => handleProjectDelete(project.id)}\n                          className=\"flex items-center justify-center gap-2 px-3 py-2 border border-red-300 text-red-600 text-sm rounded-lg hover:bg-red-50 transition-colors\"\n                        >\n                          <Trash2 className=\"w-4 h-4\" />\n                          Delete\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            ) : (\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\">\n                {filteredProjects.map((project) => (\n                  <div key={project.id} className=\"bg-white rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition-shadow\">\n                    {/* Image */}\n                    <div className=\"relative\">\n                      <div \n                        className=\"w-full h-48 rounded-t-lg bg-cover bg-center\"\n                        style={{\n                          backgroundImage: `url(${project.image || project.image_url || DEFAULT_PROJECT_IMAGE})`\n                        }}\n                      />\n                      <span className={`absolute top-2 right-2 px-2 py-1 rounded-full text-xs font-medium ${getStatusColor(project.status)}`}>\n                        {(project.status || 'inactive').charAt(0).toUpperCase() + (project.status || 'inactive').slice(1)}\n                      </span>\n                    </div>\n                    \n                    {/* Content */}\n                    <div className=\"p-4\">\n                      <h3 className=\"font-semibold text-gray-800 mb-2 truncate\">{project.name}</h3>\n                      <p className=\"text-gray-600 text-sm mb-3 line-clamp-2\">{project.description}</p>\n                      \n                      <div className=\"flex items-center justify-between mb-3\">\n                        <span className=\"text-lg font-semibold text-primary\">\n                          {(project.price / 100).toFixed(3)} ETH\n                        </span>\n                        <div className=\"flex items-center gap-2 text-sm text-gray-500\">\n                          <Eye className=\"w-3 h-3\" />\n                          {project.views || 0}\n                        </div>\n                      </div>\n\n                      {/* Actions */}\n                      <div className=\"flex gap-2\">\n                        <button\n                          onClick={() => setEditingProject(project)}\n                          className=\"flex-1 flex items-center justify-center gap-1 px-3 py-2 bg-primary text-white text-sm rounded-lg hover:bg-blue-600 transition-colors\"\n                        >\n                          <Edit className=\"w-3 h-3\" />\n                          Edit\n                        </button>\n                        <button\n                          onClick={() => window.open(`/?product=${project.id}`, '_blank')}\n                          className=\"px-3 py-2 border border-gray-300 text-gray-600 text-sm rounded-lg hover:bg-gray-50 transition-colors\"\n                        >\n                          <Eye className=\"w-4 h-4\" />\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n          </>\n        )}\n\n        {/* Edit Modal */}\n        {editingProject && (\n          <ProductEditModal\n            project={editingProject}\n            isOpen={!!editingProject}\n            onClose={() => setEditingProject(null)}\n            onUpdate={handleProjectUpdate}\n          />\n        )}\n      </div>\n    </div>\n  )\n}"],"names":[],"mappings":"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","debugId":null}}]
}